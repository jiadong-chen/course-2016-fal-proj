
<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>D3: The shortest distance distribution</title>
		<script type="text/javascript" src="d3/d3.v3.js"></script>
		<style type="text/css">
			/* No style rules here yet */		
		</style>
	</head>
	<body>
	
		<p>Click on the text to show the transition from the shortest distance distribution of crime and liquor store to that of liquor store and crime </p>
			
		<script type="text/javascript">

			//Width and height
			var w = 1200;
			var h = 500;
			
			var dataset = [0.3169984828437312, 0.1862209074923418, 0.050272977370892584, 0.18705637592159394, 0.31923148770297105, 0.3379335837938704, 0.35987366294336715, 0.19424839121641058, 0.021145561432039706, 0.20331094747959993, 0.30695543372782985, 0.14347905481077172, 0.23552925012431847, 0.32562741363436387, 0.40591774292547333, 0.2485721900047438, 0.31929451373727147, 0.10849946060116808, 0.24494404713758614, 0.458567919085901, 0.10427390793529533, 0.2750196684348155, 0.31179172056261917, 0.31335697695783865, 0.2713916830711866, 0.23921485001085718, 0.2660003824436428, 0.15472822715192258, 0.01664658532582246, 0.1513883559966708, 0.25774431183068686, 0.09331848531227172, 0.4088328363558155, 0.36095299030606093, 0.3357035844675094, 0.22960347375073537, 0.0005991304617198617, 0.13365177670704304, 0.17587410064250225, 0.3062611357519454, 0.18279166419673015, 0.09559887373022165, 0.22184496617649596, 0.4833768232413711, 0.2957638098631962, 0.07905321354797082, 0.25568045190029914, 0.043698198385469046, 0.19060192507816923, 0.47250695366465423, 0.10672805009519172, 0.3197499438150893, 0.07757918824095618, 0.058793770589833816, 0.1617218929035617, 0.26739681228852724, 0.1261696470553907, 0.23670207273290536, 0.1103511821585318, 0.8278404645221745, 0.0028950764920025584, 0.025696815800352518, 0.5468262614703504, 0.12131636437792391, 0.15267116805121583, 0.36266846458566865, 0.048001293149161406, 0.24346093153828172, 0.48667933553466275, 0.11991060343855747, 0.15815817185479195, 0.8218643213320769, 0.240700936577222, 0.13244707164034944, 0.32468899745187496, 0.017774321235178085, 0.15450656042342284, 0.11743768936903155, 0.5634425728362452, 0.26087053335929716, 0.8439103443582441, 0.2326622070964185, 0.341489011042513, 0.016954885911973992, 0.16093476432401252, 0.46891326474541023, 0.18399923156508977, 0.25875500675601554, 0.32910863884786795, 0.016362296728905462, 0.17265360157523577, 0.26452618393177874, 0.23344489433250853, 0.4306619490280704, 0.9847816133682797, 0.19740710245026755, 0.2841566400458084, 0.6385331070913768, 0.18835629347180013, 0.2762501500573891, 0.07912525103366597, 0.05376806116391212, 0.23291465316394513, 0.14033797836916928, 0.4647094845171998, 0.14368910109696487, 0.13684113320451932, 0.026197293322660457, 0.09960354170701431, 0.16029091332117093, 0.21352218957490848, 0.15447381790079848, 0.16241980550969964, 0.0026488967880158613, 0.2440452627723278, 0.06195195195321626, 0.28170843156467007, 0.47541264144140355, 0.3142013599422844, 0.28753978665844965, 0.4764107532667008, 0.26670742221680666, 0.2895496209525911, 0.1300044008701206, 0.07259427458074122, 0.2080235133125499, 0.18823087485559406, 0.2144392603376962, 0.05821981559114348, 0.032954549246811765, 0.1519909724910916, 0.2728430604449588, 0.2189713525593696, 0.2456481188970748, 0.5104744976997168, 0.12607920129544722, 0.2869050688677169, 0.09822053847446056, 0.17638161633699498, 0.2522621018679085, 0.18297515139446158, 0.24616923703307556, 0.261624283120948, 0.1700046891456335, 0.2506691394809279, 0.25617906971290777, 0.3607404029071306, 0.3812124063258723, 0.4648691640429287, 0.2654557527523267, 0.04491452002632972, 0.3190048258980316, 0.018931589788419193, 0.10385385917481785, 0.06637856433069522, 0.2461484461433279, 0.22370307433999506, 0.232275387693017, 0.4849675007453523, 0.17533845031658057, 0.09488986800637192, 0.37373015399572, 0.2704203733110601, 0.14820715428830591, 0.37199080792449263, 0.2365419232635549, 0.2867364443417357, 0.19789421172453062, 0.24967404645168756, 0.11380303571244767, 0.14930593871351358, 0.31024618978380303, 0.5044792682451554, 0.2308016795837251, 0.06749565633212161, 0.22547797226364108, 0.31691903933519355, 0.268129751554302, 0.1390470987456922, 0.17687522340148384, 0.27230114498512503, 0.25238091978608773, 0.2484165697087629, 0.08982893023257198, 0.5119186612895091, 0.26068131435769887, 0.15257019366485436, 0.16960519351835882, 0.11032515378557706, 0.26824850414038975, 0.2391316702650829, 0.2729875958222502, 0.2569062332765667, 0.24361621621327637, 0.3255127805436767, 0.035379980338883524, 0.2585752864696463, 0.07781311735822301, 0.26739681228852724, 0.2895496209525911, 0.2162101379934491, 0.1797276292208603, 0.5641599769743065, 0.22816725331846416, 0.21015411488243196, 0.2950214142332723, 0.3269405519744707, 0.31726390939952914, 0.25948326094370744, 0.04596916925523199, 0.3067148424784524, 0.0369419707828466, 0.135525453453587, 0.10994200822779326, 0.02805203058216654, 0.1011948780741338, 0.15801270503863432, 0.24720895845466256, 0.4734065886318829, 0.01778249360916126, 0.08285173014011774, 0.2867364443417357, 0.24831573306544186, 0.26289610919747813, 0.8193260480108783, 0.11886313995350888, 0.029754722310474803, 0.41283247793267663, 0.2174608357900607, 0.18140579211458382, 0.4814904758229981, 0.22793694417893684, 0.005010529370933559, 0.13129737282270754, 0.301087461805172, 0.24295933171587544, 0.15981117215510887, 0.06535834524535875, 0.3051362409913566, 0.4276467317547162, 0.00035693805797282045, 0.12229271163442845, 0.3263884863381828, 0.21980689607420742, 0.2865790852112914, 0.18885532478290584, 0.2018275679609962, 0.018864308170858685, 0.3496367786188235, 0.0369419707828466, 0.20694279887020828, 0.2772927768600506, 0.163447416944384, 0.2720765563710297, 0.2273414218412871, 0.2995898040871103, 0.2639152757169127, 0.21038371367600542, 0.13836354567192177, 0.4273662996995091, 0.2000417740831629, 0.2867364443417357, 0.10666042911175855, 0.39653785208179737, 0.13080853819311392, 0.259735173089598, 0.285465255049067, 0.07656964792050928, 0.16418394659944208, 0.5056886633196295, 0.10729168020890749, 0.24521961647731055, 0.02311997241611799, 0.1789416926524043, 0.21320099308116913, 0.26544756495851357, 0.19046893078134974, 0.21101536441175295, 0.1371207669063632, 0.3973590394270205, 0.14271302124683088, 0.2352977664073133, 0.18961139515761555, 0.22735634846981337, 0.2704786012651794, 0.32776753991932867, 0.23007541521648478, 0.18842117014323162, 0.1697937519019716, 0.2015989923289495, 0.2771386460607521, 0.1780077808949811, 0.24722941487480138, 0.12736466659256424, 0.11215216879415041, 0.14918403587865017, 0.07666614148919258, 0.2907381915141016, 0.16601561223669828, 0.20922839631878187, 0.24196612402430714, 0.17578264425925577, 0.45884999110636554, 0.22920262141710096, 0.2686450285551669, 0.27624022172849577, 0.2640731876443421, 0.24530774137044536, 0.08466980748554785, 0.22370307433999506, 0.18608143970497226, 0.2810391708323299, 0.3705234341421159, 0.20234315884389106, 0.07800662222642941, 0.4166920441323305, 0.09360566677550093, 0.11734969149637842, 0.05189228305750704, 0.2749074172573015, 0.2683205541676535, 0.23645826048943264, 0.19192141781020905, 0.19154756916999593, 0.4636431786586615, 0.2455333357918198, 0.2761247975706627, 0.09190555083185449, 0.2271820780903489, 0.2077295095135213, 0.053040598589691366, 0.2009474488057373, 0.04188733979316541, 0.019479495889222022, 0.12010080516336802, 0.04843709709815985, 0.3652257378429118, 0.04511782330663318, 0.38074315434149525, 0.36695193139279364, 0.09280081321750745, 0.31399200467023314, 0.02565608815615296, 0.21406818499944588, 0.48704094745863563, 0.33355336558616144, 0.41288657308190635, 0.08928884066935072, 0.07190762523653829, 0.0, 0.015749441144314112, 1.0, 0.10346071502093608, 0.05400100692745244, 0.25506946718787277, 0.11490923974417029, 0.32007144476869953, 0.32674282975989466, 0.20337802143884876, 0.04952399386843493, 0.4508126286856564, 0.20690765071500922, 0.2674371990841828, 0.1261513439866274, 0.009675912220848536, 0.30826367186776044, 0.2570211179916649, 0.08982304218597706, 0.06406821855235614, 0.040283032305541894, 0.022358024375051033, 0.1197028764489488, 0.7091891215300319, 0.1331718644591878, 0.07291213047553889, 0.22346308832007122, 0.21101787590587337, 0.2322908327422319, 0.2994039110361697, 0.18317941330649812, 0.07326179921879071, 0.16058587605954472, 0.3193877729848139, 0.29603323152559546, 0.32486025742536934, 0.40183527855019296, 0.25722008169389027, 0.2391316702650829, 0.32377423280388223, 0.13837686720231085, 0.07530162810767768, 0.25964728347007704, 0.26428521908821206, 0.09502118493454591, 0.2488924433900441, 0.25416102317272965, 0.47873557082714674, 0.04456014594132674, 0.18900965568020775, 0.43057603819904866, 0.06494205592885154, 0.2308016795837251, 0.12965856707872808, 0.20503807576835617, 0.2794630210734023, 0.17638316947779, 0.1547961592337693, 0.09582559766716271, 0.2140506735324154, 0.2801910007994942, 0.08885275431425296, 0.2308016795837251, 0.4914049170758648, 0.2733042759371907, 0.09677921082829338, 0.27612435008582453, 0.2366836015453698, 0.3047638314467093, 0.17745616244608517, 0.14007413440100436, 0.19889537691253914, 0.2609687558067863, 0.305579090424773, 0.5476276135031053, 0.17265360157523577, 0.04103682731336932, 0.2158521509707723, 0.4647094845171998, 0.1932385940172804, 0.2233725200933808, 0.23508760934886058, 0.32497940102415845, 0.09673721441742371, 0.22627872132001314, 0.33716090267378196, 0.2690200605506183, 0.345373576844002, 0.2308016795837251, 0.2562034771986672, 0.5005061928095138, 0.3003309925046143, 0.08067440348285289, 0.23816199081185632, 0.25741739780758766, 0.3001584568672821, 0.5341571007951291, 0.3245114626733494, 0.268659244126059, 0.15480603816538546, 0.04309774459538076, 0.22534371365635408, 0.3632054068652237, 0.09813042333241383, 0.2545225304907945, 0.20038618193768679, 0.31904735037076953, 0.14247754760944353, 0.8269256313646656, 0.3313966578992737, 0.07281018122386085, 0.18735364632964888, 0.38145976407750004, 0.20508448242523042, 0.17969949834034113, 0.040834831358235554, 0.4751457214784982, 0.21775073752417395, 0.3835525462865686, 0.23734445769099694, 0.2774970095381686, 0.18918626855120352, 0.23007541521648478, 0.1889343404428535, 0.0823181688263315, 0.18617996844498655, 0.08831365063939936, 0.7370135791164097, 0.2974455948111116, 0.25566127861815136, 0.10127586077269807, 0.2653777172123116, 0.44495350827462554, 0.04309774459538076, 0.26347560764892064, 0.4429679748443226, 0.288152006732781, 0.2232502590992853, 0.21347780163940624, 0.21506932360542316, 0.050619463843404336, 0.18002091860016325, 0.4839464532326148, 0.38307301628524787, 0.19528155209455725, 0.08153703521670942, 0.213332285693399, 0.19430522514544868, 0.22408645954988288, 0.11389465876891189, 0.10494909768247189, 0.2608291495068562, 0.2889343275322301, 0.2867755121397532, 0.2765871589750901, 0.2648369795350409, 0.2263128592787955, 0.36260624139719766, 0.31669686056612223, 0.3147533900014405, 0.37235056641029385, 0.42025461016594173, 0.3985278489594145, 0.21707627357579407, 0.43266573886221976, 0.29876633071710434, 0.08683563020440994, 0.27976162303015, 0.28915515605615216, 0.2580847328595, 0.1803433577062782, 0.09535718107124358, 0.15770343064999168, 0.2828375461051558, 0.14558304196019156, 0.26359813278709004, 0.11883396335534681, 0.06581951118286504, 0.35042656402219935, 0.25773031118145356, 0.2438031727129787, 0.16533637702452147, 0.18177012804940007, 0.3294061439390146, 0.27407120534369456, 0.38278639097160566, 0.2613246341558457, 0.2693963055968435, 0.2885892454614419, 0.5328674272533954, 0.24612784731111184, 0.14347905481077172, 0.13533177184003126, 0.2963954582623937, 0.2871910503999582, 0.19475411314984545, 0.3099024891274379, 0.24201764595547537, 0.2758848644819447, 0.28760420057820335, 0.0601111113557949, 0.280294317835008, 0.19212230649784967, 0.227323050881358, 0.1013016199248117, 0.26734430535267967, 0.06527237773746214, 0.2168883646781751, 0.26255870146119953, 0.44057768885119764, 0.14986876380903488, 0.28282243711946153, 0.020207660065780442, 0.312714128858376, 0.2623820453664508, 0.18654064820713714, 0.03490764202391279, 0.286843836849575, 0.21416228486189579, 0.15586827782328502, 0.5211827102501015, 0.17265360157523577, 0.2771386460607521, 0.25715531996789065, 0.2588891523329067, 0.6030762927413273, 0.05560370100937884, 0.10639405503436226, 0.3683349402273615, 0.19798931315616275, 0.02937346328267144, 0.15880532526025118, 0.19190399310672893, 0.025982418072323998, 0.2371847161734423, 0.2685359998845277, 0.14630687385346303, 0.19139366788862835, 0.2509189722880715, 0.11904078368191909, 0.09071755503675774, 0.39212746828631956, 0.09059935466086541, 0.2273414218412871, 0.027275331706740503, 0.18699902105834004, 0.3257838284188536, 0.5080976093993022, 0.24874889818832227, 0.14387740676011723, 0.13584656413948704, 0.21735512992800135, 0.36234273124412925, 0.2730807532645037, 0.2097495488942612, 0.27336660965254095, 0.6207029719244312, 0.11380241337062348, 0.016362296728905462, 0.38180982071767094, 0.412807311497607, 0.5110218893854866, 0.06170839821573137, 0.02685304065955718, 0.14679341321814354, 0.013701598431974186, 0.24606613836487512, 0.36435252999485884, 0.14251831169820728, 0.06219289503402332, 0.2430941968749098, 0.026344491145940764];

			
			var xScale = d3.scale.ordinal()
							.domain(d3.range(dataset.length))
							.rangeRoundBands([0, w], 0.05);

			var yScale = d3.scale.linear()
							.domain([0, d3.max(dataset)])
							.range([0, h]);
			
			//Create SVG element
			var svg = d3.select("body")
						.append("svg")
						.attr("width", w)
						.attr("height", h);

			//Create bars
			svg.selectAll("rect")
			   .data(dataset)
			   .enter()
			   .append("rect")
			   .attr("x", function(d, i) {
			   		return xScale(i);
			   })
			   .attr("y", function(d) {
			   		return h - yScale(d);
			   })
			   .attr("width", xScale.rangeBand())
			   .attr("height", function(d) {
			   		return yScale(d);
			   })
			   .attr("fill", function(d) {
					return "rgb(0, 0, " + (d * 10) + ")";
			   });

			//Create labels
			




			//On click, update with new data			
			d3.select("p")
				.on("click", function() {

					//New values for dataset
											//Count original length of dataset
					dataset = [0.31974998221627315, 0.2489945070682033, 0.09632707140423719, 1.0, 0.15483147636266548, 0.04771122326755384, 0.029828898341550527, 0.0006965754688398195, 0.0];
					var numValues = dataset.length;
					xScale.domain(d3.range(dataset.length));
					yScale.domain([0, d3.max(dataset)]);	
					

					//Update all rects
					var bars=svg.selectAll("rect")
					   .data(dataset);
					bars.enter()								//References the enter selection (a subset of the update selection)
						.append("rect")							//Creates a new rect
						.attr("x", w)							//Sets the initial x position of the rect beyond the far right edge of the SVG
						.attr("y", function(d) {				//Sets the y value, based on the updated yScale
							return h - yScale(d);
						})
						.attr("width", xScale.rangeBand())		//Sets the width value, based on the updated xScale
						.attr("height", function(d) {			//Sets the height value, based on the updated yScale
							return yScale(d);
						})
						.attr("fill", function(d) {				//Sets the fill value
							return "rgb(0, 0, " + (d * 10) + ")";
						});

					bars.transition()							//Initiate a transition on all elements in the update selection (all rects)
						.duration(500)
						.attr("x", function(d, i) {				//Set new x position, based on the updated xScale
							return xScale(i);
						})
						.attr("y", function(d) {				//Set new y position, based on the updated yScale
							return h - yScale(d);
						})
						.attr("width", xScale.rangeBand())		//Set new width value, based on the updated xScale
						.attr("height", function(d) {			//Set new height value, based on the updated yScale
							return yScale(d);
						});   

					//Update all labels
					
					bars.exit()				//References the exit selection (a subset of the update selection)
						.transition()		//Initiates a transition on the one element we're deleting
						.duration(500)
						.attr("x", w)		//Move past the right edge of the SVG
						.remove();
					   				
				});

			
		</script>
	</body>
</html>